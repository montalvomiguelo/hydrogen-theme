const t={customerAddresses:"[data-customer-addresses]",addressCountrySelect:"[data-address-country-select]",addressContainer:"[data-address]",toggleAddressButton:"button[aria-expanded]",cancelAddressButton:'button[type="reset"]',deleteAddressButton:"button[data-confirm-message]"},s={expanded:"aria-expanded",confirmMessage:"data-confirm-message"};class d{constructor(){this.elements=this._getElements(),Object.keys(this.elements).length!==0&&(this._setupCountries(),this._setupEventListeners())}_getElements(){const e=document.querySelector(t.customerAddresses);return e?{container:e,addressContainer:e.querySelector(t.addressContainer),toggleButtons:document.querySelectorAll(t.toggleAddressButton),cancelButtons:e.querySelectorAll(t.cancelAddressButton),deleteButtons:e.querySelectorAll(t.deleteAddressButton),countrySelects:e.querySelectorAll(t.addressCountrySelect)}:{}}_setupCountries(){window.Shopify&&window.Shopify.CountryProvinceSelector&&(new window.Shopify.CountryProvinceSelector("AddressCountryNew","AddressProvinceNew",{hideElement:"AddressProvinceContainerNew"}),this.elements.countrySelects.forEach(e=>{const n=e.dataset.formId;new window.Shopify.CountryProvinceSelector(`AddressCountry_${n}`,`AddressProvince_${n}`,{hideElement:`AddressProvinceContainer_${n}`})}))}_setupEventListeners(){this.elements.toggleButtons.forEach(e=>{e.addEventListener("click",this._handleAddEditButtonClick)}),this.elements.cancelButtons.forEach(e=>{e.addEventListener("click",this._handleCancelButtonClick)}),this.elements.deleteButtons.forEach(e=>{e.addEventListener("click",this._handleDeleteButtonClick)})}_toggleExpanded(e){e.setAttribute(s.expanded,(e.getAttribute(s.expanded)==="false").toString())}_handleAddEditButtonClick=({currentTarget:e})=>{this._toggleExpanded(e)};_handleCancelButtonClick=({currentTarget:e})=>{this._toggleExpanded(e.closest(t.addressContainer).querySelector(`[${s.expanded}]`))};_handleDeleteButtonClick=({currentTarget:e})=>{window.confirm(e.getAttribute(s.confirmMessage))&&window.Shopify.postLink(e.dataset.target,{parameters:{_method:"delete"}})}}const r=new d;export{r as default};
